{% extends "base.html" %}

{% block title %}Settings - Icarus{% endblock %}

{% block content %}
<div class="settings-container" style="max-width: 800px; margin: 2rem auto; padding: 20px;">
    <h1 style="margin-bottom: 2rem; font-weight: 300;">Settings</h1>

    
    <div class="settings-section" style="background: rgba(255,255,255,0.05); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
        <h2 style="margin-top: 0; font-size: 1.5rem; margin-bottom: 1rem;">Appearance</h2>
        <p style="margin-bottom: 1.5rem; opacity: 0.8;">Choose a theme for your feed.</p>
        
        <div class="theme-options" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
            
            <button onclick="updateTheme('earth')" 
                    class="theme-btn {% if user.theme == 'earth' %}active{% endif %}"
                    style="padding: 1rem; border: 1px solid rgba(255,255,255,0.1); background: #2d3e30; color: #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s;">
                <div style="width: 30px; height: 30px; background: #4a6752; border-radius: 50%; margin: 0 auto 0.5rem;"></div>
                Earth (Default)
            </button>

            
            <button onclick="updateTheme('light')" 
                    class="theme-btn {% if user.theme == 'light' %}active{% endif %}"
                    style="padding: 1rem; border: 1px solid rgba(255,255,255,0.1); background: #f5f5f5; color: #333; border-radius: 8px; cursor: pointer; transition: all 0.3s;">
                <div style="width: 30px; height: 30px; background: #fff; border: 1px solid #ccc; border-radius: 50%; margin: 0 auto 0.5rem;"></div>
                Light
            </button>

            
            <button onclick="updateTheme('dark')" 
                    class="theme-btn {% if user.theme == 'dark' %}active{% endif %}"
                    style="padding: 1rem; border: 1px solid rgba(255,255,255,0.1); background: #1a1a1a; color: #fff; border-radius: 8px; cursor: pointer; transition: all 0.3s;">
                <div style="width: 30px; height: 30px; background: #000; border: 1px solid #333; border-radius: 50%; margin: 0 auto 0.5rem;"></div>
                Dark
            </button>
        </div>
    </div>

    
    <div class="settings-section" style="background: rgba(255,255,255,0.05); padding: 2rem; border-radius: 12px;">
        <h2 style="margin-top: 0; font-size: 1.5rem; margin-bottom: 1rem;">Profile Information</h2>
        <p>To update your bio or username, please edit your profile directly.</p>
        <a href="{{ url_for('profile') }}" style="display: inline-block; padding: 0.8rem 1.5rem; background: #fff; color: #000; text-decoration: none; border-radius: 20px; font-weight: 500;">Go to Profile</a>
    </div>
</div>

<script>
function updateTheme(themeName) {
    fetch('/api/user/theme', {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ theme: themeName })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Optional: Reload to see changes immediately or update CSS
            window.location.reload();
        } else {
            alert('Failed to update theme: ' + data.error);
        }
    })
    .catch((error) => {
        console.error('Error:', error);
    });
}
</script>

<style>
.theme-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
.theme-btn.active {
    border-color: #4CAF50 !important;
    box-shadow: 0 0 0 2px #4CAF50;
}
</style>
{% endblock %}